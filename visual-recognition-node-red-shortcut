[{"id":"79f666bd.0d9cc8","type":"http in","z":"c735edd0.525de","name":"","url":"/watson-visual","method":"get","upload":false,"swaggerDoc":"","x":114,"y":219.25,"wires":[["f84b864.6e243f8"]]},{"id":"f84b864.6e243f8","type":"switch","z":"c735edd0.525de","name":"Check image URL","property":"payload.imageurl","propertyType":"msg","rules":[{"t":"null"},{"t":"else"}],"checkall":"true","outputs":2,"x":287.5,"y":288.75,"wires":[["f543fa70.f272f"],["949f0885.b5001"]]},{"id":"f543fa70.f272f","type":"template","z":"c735edd0.525de","name":"Prompt image","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<img src=\"http://exploreibm.com/static/img/exploreIBM-logo.png\" height='50'/>\n<h1>exploreIBM</h1>\n<H2>Watson Visual Recognition</H2>\n<form  action=\"{{req._parsedUrl.pathname}}\">\n    <img src=\"http://asbarez.com/wp-content/uploads/2016/02/ibmwatson.jpg\" height='200'/>\n    <img src=\"https://scontent-lga3-1.xx.fbcdn.net/v/t31.0-8/22529021_10155739363543766_6838071202177424213_o.jpg?_nc_cat=0&oh=e9287ea0cf9755d63d1e313be2065c76&oe=5B6A9689\" height='200'/>\n    <img src=\"https://www.biography.com/.image/t_share/MTE4MDAzNDEwNzg5ODI4MTEw/barack-obama-12782369-1-402.jpg\" height='200'/>\n    <img src=\"http://mlb.mlb.com/mlb/images/players/head_shot/116539.jpg\" height='200'/>\n    <img src=\"http://static.oprah.com/images/o2/201308-omag-what-know-949x534.jpg\" height='200'/>\n    <img src=\"https://www.grammy.com/sites/com/files/styles/image_landscape_hero/public/beyonce-hero-487073444_copy.jpg?itok=RTg0LU3d\" height='200'/>\n    <img src=\"https://i.ytimg.com/vi/NX0iaeMzHyI/maxresdefault.jpg\" height='200'/>\n    <img src=\"https://i.amz.mshcdn.com/QC9yDgcVF87ZQtpukIolk2B0Qkc=/950x534/filters:quality(90)/https%3A%2F%2Fblueprint-api-production.s3.amazonaws.com%2Fuploads%2Fcard%2Fimage%2F587401%2Feefe1584-6a4d-41c5-a826-8bad15a2c282.jpg\" height='200'/>\n   <br>\n   <br>\n    <br>\n    <h2>Paste Image URL: </h2><input type=\"text\" name=\"imageurl\"/>\n    <input type=\"submit\" value=\"Analyze\"/>\n    </form>\n","x":564.5,"y":192.75,"wires":[["44ffc225.0c8b74"]]},{"id":"949f0885.b5001","type":"change","z":"c735edd0.525de","name":"Extract image URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.imageurl","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":547,"y":365.75,"wires":[["582da0c8.3b9a6"]]},{"id":"582da0c8.3b9a6","type":"visual-recognition-v3","z":"c735edd0.525de","name":"","apikey":"cceb109c6008b2bc8221c923d259c53d4aab1a77","image-feature":"detectFaces","lang":"en","x":780,"y":395.5,"wires":[["17158b4.29d38f5"]]},{"id":"17158b4.29d38f5","type":"template","z":"c735edd0.525de","name":"Report faces","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<img src=\"http://exploreibm.com/static/img/exploreIBM-logo.png\" height='50'/>\n<h1>exploreIBM</h1>\n<H2>Watson Visual Recognition</H2>\n\n<!-- parse all images -->\n{{#result.images}}\n<br/><img id=\"alchemy_image\" src=\"{{source_url}}\" height=\"200\"/></p>\n\n{{^faces}}\n<P>No Face detected</P>\n{{/faces}}\n\n\n<table border='1'>\n<thead><tr><th>Age Range</th><th>Confidence</th><th>Gender</th><th>Confidence</th><th>Name</th></tr></thead>\n<!-- parse all faces -->\n{{#faces}}\n<tr>\n<td><b>{{age.min}} - {{age.max}}</b></td><td><i>{{age.score}}</i></td>\n<td>{{gender.gender}}</td><td>{{gender.score}}</td>\n{{#identity}}<td>{{identity.name}} ({{identity.score}})</td>{{/identity}}\n</tr>{{/faces}}\n</table>\n{{/result.images}}\n<form action=\"{{req._parsedUrl.pathname}}\">\n<br><input type=\"submit\" value=\"Home\"/>\n</form>\n","x":922.5,"y":268.75,"wires":[["44ffc225.0c8b74"]]},{"id":"44ffc225.0c8b74","type":"http response","z":"c735edd0.525de","name":"","x":1132,"y":220.5,"wires":[]}]
